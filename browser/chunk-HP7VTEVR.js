import{$ as S,C as M,D as _,E as d,G as f,I as y,J as l,K as s,L as m,V as x,Y as N,ha as v,i as p,j as g,ja as A,ka as E,la as W,ma as F,na as L,o as r,oa as I,p as h,pa as V,qa as B,r as C,ra as D,sa as T,t as w,v as b,x as o,y as u}from"./chunk-DW2D3TQG.js";function P(c,a){if(c&1){let t=M();o(0,"div")(1,"input",10),m("ngModelChange",function(e){p(t);let i=d();return s(i.firstName,e)||(i.firstName=e),g(e)}),u(),o(2,"input",11),m("ngModelChange",function(e){p(t);let i=d();return s(i.lastName,e)||(i.lastName=e),g(e)}),u(),o(3,"input",12),m("ngModelChange",function(e){p(t);let i=d();return s(i.companyName,e)||(i.companyName=e),g(e)}),u(),o(4,"input",13),m("ngModelChange",function(e){p(t);let i=d();return s(i.address,e)||(i.address=e),g(e)}),u(),o(5,"input",14),m("ngModelChange",function(e){p(t);let i=d();return s(i.phoneNumber,e)||(i.phoneNumber=e),g(e)}),u()()}if(c&2){let t=d();r(),l("ngModel",t.firstName),r(),l("ngModel",t.lastName),r(),l("ngModel",t.companyName),r(),l("ngModel",t.address),r(),l("ngModel",t.phoneNumber)}}var k=class c{constructor(a,t,n){this.router=a;this.http=t;this.authService=n}isLogin=!0;firstName="";lastName="";companyName="";address="";phoneNumber="";email="";password="";apiUrl="http://localhost:5169/api/Users";toggleForm(){this.isLogin=!this.isLogin}onSubmit(){this.isLogin?this.login():this.register()}login(){this.http.post(`${this.apiUrl}/login`,{email:this.email,password:this.password}).subscribe({next:a=>{console.log("\u0423\u0441\u043F\u0435\u0448\u043D\u044B\u0439 \u0432\u0445\u043E\u0434:",a),localStorage.setItem("auth-token",a.token),localStorage.setItem("user-info",JSON.stringify(a.user)),console.log("\u041F\u0440\u043E\u0432\u0435\u0440\u043A\u0430 localStorage \u043F\u043E\u0441\u043B\u0435 \u0441\u043E\u0445\u0440\u0430\u043D\u0435\u043D\u0438\u044F:",localStorage.getItem("user-info")),this.authService.updateUser(),this.router.navigate(["/"])},error:a=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0432\u0445\u043E\u0434\u0430:",a)}})}register(){let a={firstName:this.firstName,lastName:this.lastName,companyName:this.companyName,address:this.address,phoneNumber:this.phoneNumber,email:this.email,password:this.password};this.http.post(`${this.apiUrl}/register`,a).subscribe({next:t=>{console.log("\u0423\u0441\u043F\u0435\u0448\u043D\u0430\u044F \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F:",t),localStorage.setItem("user",JSON.stringify(t)),this.authService.updateUser(),this.router.navigate(["/"])},error:t=>{console.error("\u041E\u0448\u0438\u0431\u043A\u0430 \u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u0438:",t)}})}goBack(){this.router.navigate(["/"])}static \u0275fac=function(t){return new(t||c)(h(v),h(S),h(E))};static \u0275cmp=C({type:c,selectors:[["app-auth"]],decls:13,vars:6,consts:[[1,"flex","items-center","justify-center","min-h-screen","bg-gray-100"],[1,"bg-white","shadow-md","rounded-xl","p-8","w-96"],[1,"fas","fa-arrow-left","text-xl","text-primary","cursor-pointer","mb-4",3,"click"],[1,"text-2xl","font-semibold","text-center","mb-4"],[3,"submit"],[4,"ngIf"],["type","email","name","email","placeholder","\u042D\u043B\u0435\u043A\u0442\u0440\u043E\u043D\u043D\u0430\u044F \u043F\u043E\u0447\u0442\u0430","required","",1,"w-full","px-4","py-2","border","rounded-md","mb-3",3,"ngModelChange","ngModel"],["type","password","name","password","placeholder","\u041F\u0430\u0440\u043E\u043B\u044C","required","",1,"w-full","px-4","py-2","border","rounded-md","mb-3",3,"ngModelChange","ngModel"],["type","submit",1,"w-full","bg-primary","text-white","py-2","rounded-md","hover:bg-blue-900"],[1,"mt-4","text-center","text-blue-900","cursor-pointer","hover:text-primary",3,"click"],["type","text","name","firstName","placeholder","\u0418\u043C\u044F",1,"w-full","px-4","py-2","border","rounded-md","mb-3",3,"ngModelChange","ngModel"],["type","text","name","lastName","placeholder","\u0424\u0430\u043C\u0438\u043B\u0438\u044F",1,"w-full","px-4","py-2","border","rounded-md","mb-3",3,"ngModelChange","ngModel"],["type","text","name","companyName","placeholder","\u041A\u043E\u043C\u043F\u0430\u043D\u0438\u044F/\u0418\u041F",1,"w-full","px-4","py-2","border","rounded-md","mb-3",3,"ngModelChange","ngModel"],["type","text","name","address","placeholder","\u0410\u0434\u0440\u0435\u0441",1,"w-full","px-4","py-2","border","rounded-md","mb-3",3,"ngModelChange","ngModel"],["type","text","name","phoneNumber","placeholder","\u0422\u0435\u043B\u0435\u0444\u043E\u043D",1,"w-full","px-4","py-2","border","rounded-md","mb-3",3,"ngModelChange","ngModel"]],template:function(t,n){t&1&&(o(0,"div",0)(1,"div",1)(2,"i",2),_("click",function(){return n.goBack()}),u(),o(3,"h2",3),f(4),u(),o(5,"form",4),_("submit",function(){return n.onSubmit()}),w(6,P,6,5,"div",5),o(7,"input",6),m("ngModelChange",function(i){return s(n.email,i)||(n.email=i),i}),u(),o(8,"input",7),m("ngModelChange",function(i){return s(n.password,i)||(n.password=i),i}),u(),o(9,"button",8),f(10),u()(),o(11,"p",9),_("click",function(){return n.toggleForm()}),f(12),u()()()),t&2&&(r(4),y(" ",n.isLogin?"\u0410\u0432\u0442\u043E\u0440\u0438\u0437\u0430\u0446\u0438\u044F":"\u0420\u0435\u0433\u0438\u0441\u0442\u0440\u0430\u0446\u0438\u044F"," "),r(2),b("ngIf",!n.isLogin),r(),l("ngModel",n.email),r(),l("ngModel",n.password),r(2),y(" ",n.isLogin?"\u0412\u043E\u0439\u0442\u0438":"\u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F"," "),r(2),y(" ",n.isLogin?"\u041D\u0435\u0442 \u0430\u043A\u043A\u0430\u0443\u043D\u0442\u0430? \u0417\u0430\u0440\u0435\u0433\u0438\u0441\u0442\u0440\u0438\u0440\u043E\u0432\u0430\u0442\u044C\u0441\u044F":"\u0423\u0436\u0435 \u0435\u0441\u0442\u044C \u0430\u043A\u043A\u0430\u0443\u043D\u0442? \u0412\u043E\u0439\u0442\u0438"," "))},dependencies:[T,B,W,F,L,D,V,I,A,N,x],styles:["input[_ngcontent-%COMP%]{outline:none;transition:border .3s ease}input[_ngcontent-%COMP%]:focus{border-color:#2563eb;box-shadow:0 0 5px #2563eb4d}button[_ngcontent-%COMP%]{transition:background-color .3s ease}"]})};export{k as AuthComponent};
